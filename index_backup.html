Code

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ananda Ale ‚Äî Join the Wave (Demo + Live Firebase)</title>
<meta name="description" content="Ananda Ale ‚Äî Join the Wave. Ride the Bliss. Play, register, volunteer & win a Rudraksh!" />
<style>
  :root{ --bg1:#eaf6ff; --bg2:#d8f0ff; --accent:#0077b6; --accent-2:#00b4d8; --card:rgba(255,255,255,0.92); }
  *{box-sizing:border-box;font-family:Inter, system-ui, -apple-system, Roboto, "Segoe UI"; }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg1),var(--bg2));color:#04263b;}
  .wrap{min-height:100%;display:flex;flex-direction:column;}
  header{padding:18px 20px;display:flex;justify-content:space-between;align-items:center}
  .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
  main{display:grid;grid-template-columns:1fr 380px;gap:22px;padding:18px;}
  @media(max-width:980px){main{grid-template-columns:1fr;padding:12px} .right-col{order:2}}
  .card{background:var(--card);border-radius:14px;padding:14px;box-shadow:0 10px 30px rgba(6,20,31,0.06)}
  .hero{position:relative;border-radius:16px;padding:34px;text-align:center;overflow:hidden;min-height:480px}
  .wave-layer{position:absolute;left:0;right:0;height:56%;bottom:-8%;pointer-events:none}
  .wave{position:absolute;left:-20%;width:140%;height:120%;background: url('data:image/svg+xml;utf8,\
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">\
      <path fill="%23007bbf" fill-opacity="0.12" d="M0,192L48,186.7C96,181,192,171,288,176C384,181,480,203,576,197.3C672,192,768,160,864,154.7C960,149,1056,171,1152,170.7C1248,171,1344,149,1392,138.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>');background-size:cover;animation: drift 14s linear infinite;}
  .wave.w2{opacity:0.6;filter:blur(6px);animation-duration:18s;bottom:-12%}
  .wave.w3{opacity:0.35;filter:blur(10px);animation-duration:25s;bottom:-18%}
  @keyframes drift{from{transform:translateX(0)}to{transform:translateX(-20%)}}
  h2{font-size:32px;margin:8px 0 6px;color:#04324a}
  p.lead{margin:0 0 16px;color:#165a7a}
  .cta{display:flex;gap:12px;justify-content:center;align-items:center}
  .start-btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;padding:12px 18px;border-radius:12px;border:none;cursor:pointer;font-weight:700}
  .ghost{background:transparent;border:2px solid rgba(4,50,75,0.06);padding:10px 12px;border-radius:10px;cursor:pointer}
  .right-col{display:flex;flex-direction:column;gap:14px}
  iframe{width:100%;border:0;border-radius:10px}
  .tracker{display:flex;gap:10px}
  .stat{flex:1;padding:12px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.9),rgba(255,255,255,0.85));text-align:center}
  .games{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media(max-width:780px){.games{grid-template-columns:1fr}}
  .play-area{position:relative;height:210px;border-radius:10px;overflow:hidden;padding:8px;background:linear-gradient(180deg, rgba(0,180,216,0.03), rgba(0,123,191,0.02))}
  .bead{position:absolute;width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;user-select:none;box-shadow:0 6px 18px rgba(0,0,0,0.12)}
  .rud{background:linear-gradient(180deg,#7a3b14,#5a260d);color:white;font-weight:700;font-size:20px;border:3px solid rgba(0,0,0,0.06)}
  .modal{position:fixed;inset:0;background:rgba(2,6,10,0.32);display:flex;align-items:center;justify-content:center;z-index:60;opacity:0;pointer-events:none;transition:opacity .18s}
  .modal.show{opacity:1;pointer-events:auto}
  .modal .inner{background:white;padding:18px;border-radius:12px;max-width:520px;width:92%;text-align:center}
  footer{padding:18px;text-align:center;color:#08323f;opacity:0.9}
  form .row{display:flex;gap:8px;margin-bottom:8px}
  form input, form textarea, form select{padding:10px;border-radius:8px;border:1px solid rgba(4,50,75,0.06);width:100%}
  .small{font-size:13px;color:#06506b}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div style="display:flex;gap:12px;align-items:center">
      <img src="logo.jpeg" alt="Ananda Ale Logo" class="logo" style="width:44px;height:44px;border-radius:10px;object-fit:cover">
      <div>
        <div style="font-weight:800">Ananda Ale</div>
        <div class="small">Ride the wave ‚Ä¢ Join the bliss</div>
      </div>
    </div>
    <nav>
      <a href="#games">Games</a> ‚Ä¢ <a href="#forms">Register</a> ‚Ä¢ <a href="#volunteer">Volunteer</a>
    </nav>
  </header>

  <main>
    <section class="hero card" id="hero">
      <div class="wave-layer" aria-hidden="true">
        <div class="wave w1"></div>
        <div class="wave w2"></div>
        <div class="wave w3"></div>
      </div>
      <h2>Join the Wave. Ride the Bliss.</h2>
      <p class="lead">Simple challenges ‚Ä¢ Share the joy ‚Ä¢ Win a Rudraksh üåø</p>
      <div class="cta">
        <button class="start-btn" id="startBtn">üåä Start My Ride</button>
        <button class="ghost" id="shareBtn">Share</button>
      </div>
      <div style="margin-top:12px;display:flex;align-items:center;justify-content:center;gap:12px">
        <button class="ghost" id="showQR">QR</button>
        <div style="padding:6px 10px;background:rgba(255,255,255,0.7);border-radius:10px">Riders: <strong id="liveCounter">0</strong></div>
      </div>
    </section>

    <aside class="right-col">
      <div class="card">
        <h3 style="margin:0 0 8px 0">Wave Tracker (Live)</h3>
        <div class="tracker">
          <div class="stat"><div style="font-size:20px" id="countCompleted">0</div><div class="small">Completed IE</div></div>
          <div class="stat"><div style="font-size:20px" id="countRegistered">0</div><div class="small">Registered</div></div>
          <div class="stat"><div style="font-size:20px" id="countInterested">0</div><div class="small">Interested</div></div>
        </div>
        <div class="small" style="margin-top:10px">Local demo works immediately. For global live counts, enable Firebase (instructions below).</div>
      </div>

      <div class="card">
        <h3 style="margin:0 0 8px 0">QR & Share</h3>
        <img id="qrImg" src="" alt="QR" style="width:200px;height:200px;display:block;margin:auto;border-radius:12px">
        <div style="display:flex;gap:8px;margin-top:10px;justify-content:center">
          <button class="ghost" id="copyLinkBtn">Copy Link</button>
          <button class="ghost" id="openShare">Share</button>
        </div>
      </div>

      <div class="card">
        <h3 style="margin:0 0 8px 0">Quick Simulate</h3>
        <div style="display:flex;gap:8px">
          <button id="fakeCompleteBtn" class="start-btn">I completed IE</button>
          <button id="fakeRegister" class="ghost">I registered</button>
        </div>
      </div>
    </aside>
  </main>

  <!-- revealed area -->
  <div id="revealed" style="display:none;padding:18px;">
    <div class="card" id="forms">
      <h3>Interest Form (Demo)</h3>
      <p class="small">This is a sample in-page form ‚Äî submissions will save to your browser or Firebase when enabled.</p>
      <form id="interestForm">
        <div class="row"><input id="i_name" required placeholder="Your name"></div>
        <div class="row"><input id="i_phone" placeholder="Phone / WhatsApp (optional)"></div>
        <div class="row"><textarea id="i_msg" rows="3" placeholder="Tell us why you want to ride the wave üå∏"></textarea></div>
        <div style="display:flex;gap:8px;align-items:center">
          <button type="submit" class="start-btn">Submit Interest</button>
          <div style="flex:1"></div>
          <div class="small">Saved: <span id="interestSaved">0</span></div>
        </div>
      </form>
    </div>

    <div class="card" id="games">
      <h3>Games & Challenges</h3>
      <div class="games">
        <div>
          <h4>Quiz</h4>
          <p class="small">Complete: "Bliss is not something you ___, it's something you ___."</p>
          <div style="display:flex;gap:8px">
            <input id="qInput" placeholder="Type your answer">
            <button id="qSubmit" class="start-btn">Submit</button>
          </div>
          <div id="qResult" style="margin-top:10px;font-weight:700;color:#064c62"></div>
        </div>
        <div>
          <h4>Wave-click: Rudraksh</h4>
          <p class="small">Click beads for 15s ‚Äî top clickers go into the raffle.</p>
          <div class="play-area" id="playArea"></div>
          <div style="display:flex;gap:8px;align-items:center;margin-top:8px">
            <div id="gameTimer">00:15</div>
            <button id="startGame" class="start-btn">Start Game</button>
            <div style="flex:1"></div>
            <div>Score: <span id="gameScore">0</span></div>
          </div>
          <div style="margin-top:10px">
            <h4>Leaderboard</h4>
            <ol id="leaderboard"></ol>
          </div>
        </div>
      </div>
    </div>

    <div class="card" id="volunteer">
      <h3>Volunteer Connect (Demo)</h3>
      <p class="small">Sample volunteer form ‚Äî save goes local or to Firebase when enabled.</p>
      <form id="volForm">
        <div class="row"><input id="v_name" required placeholder="Your name"></div>
        <div class="row"><input id="v_email" placeholder="Email"></div>
        <div class="row">
          <select id="v_interest">
            <option value="">Select interest</option>
            <option>Kitchen seva</option>
            <option>Event setup</option>
            <option>Logistics</option>
            <option>Social media</option>
          </select>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <button type="submit" class="start-btn">Volunteer</button>
          <div style="flex:1"></div>
          <div class="small">Saved: <span id="volSaved">0</span></div>
        </div>
      </form>
    </div>
  </div>

  <footer>
    Built with ‚ù§Ô∏è by Yamz ‚Ä¢ Demo + Firebase-ready. <br>
    <small class="small">To enable live sharing across users, follow the Firebase steps below and paste your config into the file (search for FIREBASE in the script).</small>
  </footer>
</div>

<!-- Modal -->
<div class="modal" id="modal"><div class="inner"><h3 id="modalTitle">Nice!</h3><p id="modalText"></p><div style="margin-top:12px"><button id="modalOk" class="start-btn">OK</button></div></div></div>

<script>
/* ----------------------------
   FIREBASE TOGGLE (paste your config here)
   ----------------------------
   To enable live mode:
   1) Create a Firebase project (instructions in the message below).
   2) Enable Firestore database (in test mode is okay for demo).
   3) Add a Web App in Project Settings and copy the config object.
   4) Paste the object below into firebaseConfig (replace the null).
   5) Save and reload this page ‚Äî live mode will connect automatically.
*/

const firebaseConfig = null; 
/* Example (DO NOT PUBLISH your real API keys publicly in shared repos unless you secure rules):
const firebaseConfig = {
  apiKey: "AAAA...xyz",
  authDomain: "ananda-ale.firebaseapp.com",
  projectId: "ananda-ale",
  storageBucket: "ananda-ale.appspot.com",
  messagingSenderId: "1234567890",
  appId: "1:1234567890:web:abcdef",
};
*/

let FIREBASE_MODE = false;
let db = null; // will hold firestore reference

/* load firebase scripts dynamically only if user pasted config */
async function initFirebaseIfConfigured(){
  if(!firebaseConfig) return;
  try{
    // load firebase libs
    await loadScript('https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js');
    await loadScript('https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js');
    // initialize
    firebase.initializeApp(firebaseConfig);
    db = firebase.firestore();
    FIREBASE_MODE = true;
    console.log('Firebase connected (compat mode) ‚Äî live mode ON');
    // ensure initial sync
    loadLiveTracker();
    loadLeaderboardFromFirebase();
    loadCountsFromFirebase(); // update counts
  } catch(e){
    console.error('Firebase init failed', e);
  }
}

function loadScript(src){ return new Promise((res,rej)=>{ const s=document.createElement('script'); s.src=src; s.onload=res; s.onerror=rej; document.head.appendChild(s);}); }

/* ----------------------------
   Lite local fallback tracker (localStorage) + UI bindings
   ---------------------------- */
const startBtn = document.getElementById('startBtn'), revealed = document.getElementById('revealed');
const qrImg = document.getElementById('qrImg');
const showQR = document.getElementById('showQR');
const copyLinkBtn = document.getElementById('copyLinkBtn');
const openShare = document.getElementById('openShare');
const shareBtn = document.getElementById('shareBtn');
const liveCounter = document.getElementById('liveCounter');
const countCompleted = document.getElementById('countCompleted');
const countRegistered = document.getElementById('countRegistered');
const countInterested = document.getElementById('countInterested');
const fakeCompleteBtn = document.getElementById('fakeCompleteBtn');
const fakeRegisterBtn = document.getElementById('fakeRegister');

const interestForm = document.getElementById('interestForm');
const volForm = document.getElementById('volForm');
const interestSaved = document.getElementById('interestSaved');
const volSaved = document.getElementById('volSaved');

const modal = document.getElementById('modal'), modalOk = document.getElementById('modalOk'), modalTitle = document.getElementById('modalTitle'), modalText = document.getElementById('modalText');

let tracker = { completed:0, registered:0, interested:0 };

// local storage keys
const KEY_TRACKER = 'ananda_tracker_v2';
const KEY_LEADER = 'ananda_leaderboard_v2';

/* QR */
function generateQR(url, size=220){ qrImg.src = 'https://chart.googleapis.com/chart?cht=qr&chs=' + size + 'x' + size + '&chl=' + encodeURIComponent(url); }
generateQR(location.href);

showQR.addEventListener('click', ()=> { window.scrollTo({top:0,behavior:'smooth'}); qrImg.scrollIntoView({behavior:'smooth'}) });
copyLinkBtn.addEventListener('click', async ()=> {
  try{ await navigator.clipboard.writeText(location.href); showModal('Copied ‚úÖ','Link copied to clipboard ‚Äî share it!'); }catch(e){ showModal('Copy failed','Copy manually: ' + location.href); }
});
openShare.addEventListener('click', doShare);
shareBtn.addEventListener('click', doShare);
function doShare(){ if(navigator.share){ navigator.share({title:'Ananda Ale ‚Äî Join the Wave', text:'Ride the bliss ‚Äî join Ananda Ale!', url:location.href}).catch(()=>{}); } else { navigator.clipboard.writeText(location.href).then(()=> showModal('Copied','Link copied to clipboard!')); } }

/* start */
startBtn.addEventListener('click', ()=>{ revealed.style.display='block'; window.location.hash='forms'; });

/* load/persist tracker locally */
function loadTrackerLocal(){
  try{ const raw = localStorage.getItem(KEY_TRACKER); if(raw) tracker = JSON.parse(raw); }catch(e){ tracker = {completed:0,registered:0,interested:0}; }
  updateTrackerUI();
}
function saveTrackerLocal(){ localStorage.setItem(KEY_TRACKER, JSON.stringify(tracker)); updateTrackerUI(); }
function updateTrackerUI(){
  countCompleted.textContent = tracker.completed;
  countRegistered.textContent = tracker.registered;
  countInterested.textContent = tracker.interested;
  liveCounter.textContent = (tracker.completed + tracker.registered + tracker.interested);
}
loadTrackerLocal();

/* Quick simulate */
fakeCompleteBtn.addEventListener('click', async ()=>{
  if(FIREBASE_MODE){ await incrementRemoteCount('completed'); showModal('Marked','Count updated live!'); }
  else { tracker.completed += 1; saveTrackerLocal(); showModal('Marked','Saved locally (demo).'); }
});
fakeRegisterBtn.addEventListener('click', async ()=>{
  if(FIREBASE_MODE){ await incrementRemoteCount('registered'); showModal('Marked','Count updated live!'); }
  else { tracker.registered += 1; saveTrackerLocal(); showModal('Marked','Saved locally (demo).'); }
});

/* Modal */
function showModal(t,txt){ modalTitle.textContent = t; modalText.textContent = txt; modal.classList.add('show'); }
modalOk.addEventListener('click', ()=> modal.classList.remove('show'));
modal.addEventListener('click', (e)=>{ if(e.target===modal) modal.classList.remove('show'); });

/* Forms (use local save or Firebase) */
interestForm.addEventListener('submit', async (e)=>{
  e.preventDefault();
  const doc = { name: document.getElementById('i_name').value||'Anon', phone:document.getElementById('i_phone').value||'', message: document.getElementById('i_msg').value||'', ts:Date.now() };
  if(FIREBASE_MODE){ await saveInterestRemote(doc); showModal('Thanks!','Interest recorded (live)'); }
  else { saveInterestLocal(doc); showModal('Thanks!','Interest recorded (local demo)'); }
});
volForm.addEventListener('submit', async (e)=>{ e.preventDefault(); const doc={ name: document.getElementById('v_name').value||'Anon', email:document.getElementById('v_email').value||'', interest:document.getElementById('v_interest').value||'', ts:Date.now() }; if(FIREBASE_MODE){ await saveVolunteerRemote(doc); showModal('Thanks!','Volunteer recorded (live)'); } else { saveVolunteerLocal(doc); showModal('Thanks!','Volunteer recorded (local demo)'); } });

/* local saves */
function saveInterestLocal(doc){ const arr = JSON.parse(localStorage.getItem('ananda_interests_v2')||'[]'); arr.push(doc); localStorage.setItem('ananda_interests_v2', JSON.stringify(arr)); interestSaved.textContent = arr.length; tracker.interested += 1; saveTrackerLocal(); }
function saveVolunteerLocal(doc){ const arr = JSON.parse(localStorage.getItem('ananda_vols_v2')||'[]'); arr.push(doc); localStorage.setItem('ananda_vols_v2', JSON.stringify(arr)); volSaved.textContent = arr.length; tracker.registered += 1; saveTrackerLocal(); }

/* Quiz logic */
const qSubmit = document.getElementById('qSubmit'), qInput = document.getElementById('qInput'), qResult = document.getElementById('qResult');
qSubmit.addEventListener('click', ()=>{
  const ans = (qInput.value||'').trim().toLowerCase();
  if(!ans){ qResult.textContent='Try typing something sweet üòä'; return; }
  if(ans.includes('seek') || ans.includes('search') || ans.includes('find') || ans.includes('become') || ans.includes('be')){ qResult.textContent='Lovely ‚Äî you got the vibe ‚ú®'; updateAfterQuiz(); }
  else qResult.textContent="Close ‚Äî try words like 'seek' or 'become'.";
});
function updateAfterQuiz(){ if(FIREBASE_MODE) incrementRemoteCount('interested'); else { tracker.interested += 1; saveTrackerLocal(); } }

/* Rudraksh game (same core as earlier) */
const playArea = document.getElementById('playArea'), startGameBtn = document.getElementById('startGame'), gameTimer = document.getElementById('gameTimer'), gameScoreEl = document.getElementById('gameScore'), leaderboardEl = document.getElementById('leaderboard');
let gameRunning=false, gameScore=0, gameTimeLeft=15, gameTimerInterval=null;

function placeBeads(n=7){
  playArea.innerHTML='';
  const w=playArea.clientWidth, h=playArea.clientHeight;
  for(let i=0;i<n;i++){
    const b=document.createElement('div'); b.className='bead rud';
    const size=38+Math.round(Math.random()*24); b.style.width=b.style.height=size+'px';
    b.style.left=(Math.random()*(w-size))+'px'; b.style.top=(Math.random()*(h-size))+'px';
    b.textContent='‡•ê';
    b.addEventListener('click', ()=>{ if(!gameRunning) return; gameScore+=1; gameScoreEl.textContent=gameScore; b.remove(); });
    playArea.appendChild(b);
  }
}
function startGame(){
  if(gameRunning) return;
  gameRunning=true; gameScore=0; gameScoreEl.textContent=0; gameTimeLeft=15; gameTimer.textContent='00:15';
  placeBeads(9);
  gameTimerInterval = setInterval(()=>{ gameTimeLeft--; gameTimer.textContent = '00:' + String(gameTimeLeft).padStart(2,'0'); if(gameTimeLeft<=0) stopGame(); },1000);
}
function stopGame(){
  clearInterval(gameTimerInterval); gameRunning=false;
  // record score
  const name = prompt('Name for leaderboard (optional):','Friend') || 'Friend';
  const entry = { name, score:gameScore, ts:Date.now() };
  if(FIREBASE_MODE){ saveLeaderboardRemote(entry); showModal('Result','Score saved live!'); } else { addToLocalLeaderboard(entry); showModal('Result','Score saved locally for demo'); }
  playArea.innerHTML='';
}
startGameBtn.addEventListener('click', ()=> startGame());

/* Local leaderboard helpers */
function getLocalLeaderboard(){ return JSON.parse(localStorage.getItem(KEY_LEADER) || '[]'); }
function addToLocalLeaderboard(e){ const lb = getLocalLeaderboard(); lb.push(e); lb.sort((a,b)=>b.score-a.score || a.ts-b.ts); if(lb.length>10) lb.splice(10); localStorage.setItem(KEY_LEADER, JSON.stringify(lb)); renderLeaderboardLocal(); }
function renderLeaderboardLocal(){ const lb=getLocalLeaderboard(); leaderboardEl.innerHTML=''; lb.forEach(it=>{ const li=document.createElement('li'); li.textContent = `${it.name} ‚Äî ${it.score} pts`; leaderboardEl.appendChild(li); }); }
renderLeaderboardLocal();

/* ----------------------------
   FIREBASE functions (if enabled)
   Uses Firestore compat mode for simplicity
   Collections:
     - stats (single doc 'counts') {completed, registered, interested}
     - interests (documents for each submission)
     - volunteers (documents)
     - leaderboard (documents for game scores)
   ---------------------------- */

async function loadLiveTracker(){
  if(!FIREBASE_MODE) return;
  try{
    const doc = await db.collection('stats').doc('counts').get();
    if(doc.exists){ const data = doc.data(); tracker.completed = data.completed||0; tracker.registered = data.registered||0; tracker.interested = data.interested||0; updateTrackerUI(); }
    // listen to changes
    db.collection('stats').doc('counts').onSnapshot(snap => { if(snap.exists){ const d = snap.data(); tracker = { completed:d.completed||0, registered:d.registered||0, interested:d.interested||0 }; updateTrackerUI(); }});
  }catch(e){ console.error('loadLiveTracker', e); }
}
async function incrementRemoteCount(field){
  if(!FIREBASE_MODE) return;
  const ref = db.collection('stats').doc('counts');
  await db.runTransaction(async (t)=>{
    const snap = await t.get(ref);
    if(!snap.exists) t.set(ref, {completed:0,registered:0,interested:0});
    t.update(ref, { [field]: firebase.firestore.FieldValue.increment(1) });
  });
}
async function saveInterestRemote(doc){
  if(!FIREBASE_MODE) return;
  await db.collection('interests').add(doc);
  await incrementRemoteCount('interested');
}
async function saveVolunteerRemote(doc){
  if(!FIREBASE_MODE) return;
  await db.collection('volunteers').add(doc);
  await incrementRemoteCount('registered');
}
async function saveLeaderboardRemote(entry){
  if(!FIREBASE_MODE) return;
  await db.collection('leaderboard').add(entry);
  await loadLeaderboardFromFirebase();
}
async function loadLeaderboardFromFirebase(){
  if(!FIREBASE_MODE) return;
  const snap = await db.collection('leaderboard').orderBy('score','desc').limit(10).get();
  const arr = []; snap.forEach(d=> arr.push(d.data()));
  leaderboardEl.innerHTML = '';
  arr.forEach(it=>{ const li=document.createElement('li'); li.textContent = `${it.name} ‚Äî ${it.score} pts`; leaderboardEl.appendChild(li); });
}
async function loadCountsFromFirebase(){
  if(!FIREBASE_MODE) return;
  const doc = await db.collection('stats').doc('counts').get();
  if(doc.exists){ tracker.completed = doc.data().completed||0; tracker.registered = doc.data().registered||0; tracker.interested = doc.data().interested||0; updateTrackerUI(); } 
  else { await db.collection('stats').doc('counts').set({completed:0,registered:0,interested:0}); updateTrackerUI(); }
}

/* helper: save interest & volunteer remote are above called on form submit */

/* ----------------------------
   Helper: save leaderboard/local load
   ---------------------------- */
function loadCountsIfNoFirebase(){ // used when not in firebase mode to show counts from local
  if(!FIREBASE_MODE) updateTrackerUI();
}

/* ----------------------------
   init & start firebase if configured
   ---------------------------- */
initFirebaseIfConfigured().then(()=>{ if(!FIREBASE_MODE) loadCountsIfNoFirebase(); });

/* If Firebase isn't used, we still show demo counts from local storage */
loadCountsIfNoFirebase();

/* For local saved counters display */
interestSaved.textContent = JSON.parse(localStorage.getItem('ananda_interests_v2')||'[]').length;
volSaved.textContent = JSON.parse(localStorage.getItem('ananda_vols_v2')||'[]').length;

/* small pulse live counter */
setInterval(()=>{ document.getElementById('liveCounter').animate([{transform:'scale(1)'},{transform:'scale(1.06)'},{transform:'scale(1)'}],{duration:1400}); },3000);

</script>
</body>
</html>